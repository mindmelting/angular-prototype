!function(){"use strict";angular.module("prototype",["ui.router","ct.ui.router.extras.future","ngTouch"])}(),function(){"use strict";function t(t,e,o){function n(){return p}function r(){var t;return angular.forEach(e.breakpoints,function(e){(!e.resolution||o.innerWidth<=e.resolution)&&(t=e)}),t||e.breakpoints[0]}function i(){var t=r();return p!==t?(p=t,!0):!1}function a(){i()&&t.$apply()}var p=r();return angular.element(o).bind("resize",o._.throttle(a,500)),{getBreakpoint:n}}angular.module("prototype").factory("breakpointService",t),t.$inject=["$rootScope","$prototype","$window"]}(),function(){"use strict";function t(t,e,o,n,r){return{restrict:"E",scope:{},templateUrl:"prototype/prototype.html",link:function(i,a){function p(e){i.options=t.current.breakpoints[e.name],i.breakpoint=e,i.ratio=e.resolution/i.options.imageWidth,i.screenUrl=c(t.current)}function s(){i.preload.length=0,angular.forEach(i.options.hotspots,u)}function u(e){var o=t.get(e.state);o&&i.preload.push(c(o))}function c(e){var o=e.name+"_"+i.breakpoint.name+n.screenFileFormat;return n.screenUrl+t.href(e).replace("#","")+"/"+o}function l(){a.addClass("hint"),r(function(){a.removeClass("hint")},700)}i.debug=!!e.debug,i.preload=[],i.showHint=l,i.$watch(function(){return o.getBreakpoint()},p),a.find("[data-screen]").on("load",function(){i.$apply(s)})}}}angular.module("prototype").directive("prototype",t),t.$inject=["$state","$stateParams","breakpointService","$prototype","$timeout"]}(),function(){"use strict";function t(t,e){function o(t){return t.get(i.screenConfigFile).then(function(t){angular.forEach(t.data,n)})}function n(e){t.state(e.state,{url:e.url+"?debug",breakpoints:e.breakpoints,template:"<prototype></prototype>"})}function r(t){_.assign(i,t),e.addResolve(o)}var i={screenConfigFile:"/app/config/screens.json",breakpoints:[{name:"desktop",resolution:1280},{name:"tablet",resolution:960},{name:"mobile",resolution:540}],screenUrl:"assets/screens",screenFileFormat:".png"};o.$inject=["$http"],this.$get=function(){return i},this.init=r}angular.module("prototype").provider("$prototype",t),t.$inject=["$stateProvider","$futureStateProvider"]}(),angular.module("prototype").run(["$templateCache",function(t){t.put("prototype/prototype.html",'<div class="prototype-wrapper" ng-click="showHint()"><div class="prototype-container" ng-class="{debug: debug}"><img ng-attr-width="{{breakpoint.resolution}}" data-screen="" ng-src="{{screenUrl}}"> <a ui-sref="{{hotspot.state}}({debug: debug || null})" ng-click="$event.stopPropagation()" ng-repeat="hotspot in options.hotspots" class="hotspot" style="left: {{hotspot.x * ratio}}px; top: {{hotspot.y * ratio}}px; width: {{hotspot.width * ratio}}px; height: {{hotspot.height * ratio}}px"></a></div><img class="screen-preload" ng-src="{{pre}}" ng-repeat="pre in preload"></div>')}]);