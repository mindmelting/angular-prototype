!function(){"use strict";angular.module("proto.screen",["ui.router","ct.ui.router.extras.future"])}(),function(){"use strict";function t(t,e){function n(t){return t.get(s.screenConfigFile).then(function(t){angular.forEach(t.data,o)})}function o(e){t.state(e.state,{url:e.url+"?debug",breakpoints:e.breakpoints,template:"<hotspot></hotspot>"})}function r(t){_.assign(s,t),e.addResolve(n)}var s={screenConfigFile:"/app/config/screens.json",breakpoints:[{name:"desktop"},{name:"tablet",maxResolution:960},{name:"mobile",maxResolution:320}],screenUrl:"assets/screens/",screenFileFormat:".png"};n.$inject=["$http"],this.$get=function(){return s},this.init=r}angular.module("proto.screen").provider("protoScreen",t),t.$inject=["$stateProvider","$futureStateProvider"]}(),function(){"use strict";function t(t,e,n,o){return{restrict:"E",templateUrl:"hotspots/hotspot.html",link:function(r,s){function a(e){r.options=t.current.breakpoints[e],r.breakpoint=e,r.screenUrl=c(t.current.name)}function i(){r.preload.length=0,angular.forEach(r.options.hotspots,u)}function u(e){var n=t.get(e.state);n&&r.preload.push(c(n.name))}function c(t){var e=t+"_"+r.breakpoint+o.screenFileFormat;return o.screenUrl+t+"/"+e}r.debug=!!e.debug,r.preload=[],r.$watch(function(){return n.getBreakpoint()},a),s.find("[data-screen]").on("load",function(){r.$apply(i)})}}}angular.module("proto.screen").directive("hotspot",t),t.$inject=["$state","$stateParams","breakpointService","protoScreen"]}(),function(){"use strict";function t(t,e,n){function o(){return i}function r(){var t;return angular.forEach(e.breakpoints,function(e){(!e.maxResolution||n.innerWidth<=e.maxResolution)&&(t=e.name)}),t}function s(){var t=r();return i!==t?(i=t,!0):!1}function a(){s()&&t.$apply()}var i=r();return angular.element(n).bind("resize",n._.throttle(a,500)),{getBreakpoint:o}}angular.module("proto.screen").factory("breakpointService",t),t.$inject=["$rootScope","protoScreen","$window"]}(),angular.module("proto.screen").run(["$templateCache",function(t){t.put("hotspots/hotspot.html",'<div class="hotspot-wrapper"><div class="hotspot-container" ng-class="{debug: debug}"><img data-screen="" ng-src="{{screenUrl}}"> <a ui-sref="{{hotspot.state}}({debug: debug || null})" ng-repeat="hotspot in options.hotspots" class="hotspot" style="left: {{hotspot.x}}px; top: {{hotspot.y}}px; width: {{hotspot.width}}px; height: {{hotspot.height}}px"></a></div><img class="screen-preload" ng-src="{{pre}}" ng-repeat="pre in preload" style="display:none;"></div>')}]);